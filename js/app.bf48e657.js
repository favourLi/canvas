(function(e){function t(t){for(var r,c,o=t[0],h=t[1],a=t[2],s=0,u=[];s<o.length;s++)c=o[s],l[c]&&u.push(l[c][0]),l[c]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(e[r]=h[r]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var h=n[o];0!==l[h]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},l={app:0},i=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var d=h;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2856:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("canvas",{attrs:{id:"canvas"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"showPop",attrs:{id:"show"}},[e._v(e._s(e.showText))])])},i=[],c=(n("a481"),{text:"1",level:0,childLen:20,children:[{text:"2",level:1,childLen:10,children:[{text:"2",level:2,childLen:4,children:[{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]}]},{text:"2",level:2,childLen:4,children:[{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]}]},{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:7,children:[{text:"2",level:2,childLen:4,children:[{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]}]},{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:4,children:[{text:"2",level:2,childLen:2,children:[{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]}]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:4,children:[{text:"2",level:2,childLen:2,children:[{text:"2",level:3,childLen:0,children:[]},{text:"2",level:3,childLen:0,children:[]}]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]},{text:"2",level:1,childLen:2,children:[{text:"2",level:2,childLen:0,children:[]},{text:"2",level:2,childLen:0,children:[]}]}]}),o=n("9393"),h=(n("55dd"),n("6c7b"),n("ac4d"),n("8a81"),n("ac6a"),n("c665")),a=n("aa9a"),d=function(){function e(t,n){var r=this;Object(h["a"])(this,e),this.data=t,this.parent=n,this.children=t.children,this.id=null,this.styles={color:"#2826f7"},this.numChild=t.childLen,0==this.numChild?this.circleRadius=10:this.circleRadius=12,this.order=null,this.angle=null,this.x=null,this.y=null,this.radius=null,this.rect=null;var l=0;Object.defineProperty(this,"radius",{set:function(e){"number"===typeof e&&(l=e,r.refresh())},get:function(){return l}},{enumerable:!0})}return Object(a["a"])(e,[{key:"refresh",value:function(){var e=this.parent?this.parent.x:0,t=this.parent?this.parent.y:0;this.x=this.radius*Math.cos(this.angle)+e,this.y=0-this.radius*Math.sin(this.angle)+t}}]),e}(),s=function e(t,n){Object(h["a"])(this,e),this.x=t,this.y=n};function u(){this.name="Utils"}function v(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function f(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function x(e,t){var n=!1;e.x>=t.rect[0].x&&e.x<=t.rect[1].x&&(n=!0);var r=!1;return e.y>=t.rect[0].y&&e.y<=t.rect[1].y&&(r=!0),n&&r}function y(e,t){var n=!1;e.x>=t.x-1.2*t.circleRadius&&e.x<=t.x+1.2*t.circleRadius&&(n=!0);var r=!1;return e.y>=t.y-1.2*t.circleRadius&&e.y<=t.y+1.2*t.circleRadius&&(r=!0),n&&r}function p(e,t){var n;return t.children&&t.children.length&&g(e,t.children)?t.children.map(function(t){x(e,t)&&(n=p(e,t))}):y(e,t)&&(n=t),n}function g(e,t){var n=!1;return t.map(function(t){t.children&&t.children.length&&g(e,t.children)&&(n=!0),x(e,t)&&(n=!0)}),n}function m(e){e.radius=40,e.children&&e.children.length&&e.children.map(function(e,t){m(e)}),N(e)}function w(e,t){t.children.sort(function(e,t){return e.order-t.order}).map(function(t){if(t!==e){while(_(t,e))t.radius+=1,b(L(t).children),N(L(t));while(O(e,t,t.parent))t.radius+=1,e.radius+=1,b(L(t).children),N(L(t)),b(L(e).children),N(L(e))}}),e.children&&e.children.length&&e.children.map(function(t){w(t,e)})}function L(e){return 1!=e.data.level?L(e.parent):e}function _(e,t){var n=e.rect[0].x,r=t.rect[0].x,l=e.rect[1].x,i=t.rect[1].x,c=e.rect[0].y,o=t.rect[0].y,h=e.rect[1].y,a=t.rect[1].y,d=!1;(r>=n&&r<=l||i>=n&&i<=l||n>=r&&n<=i||l>=r&&l<=i)&&(d=!0);var s=!1;return(o>=c&&o<=h||a>=c&&a<=h||c>=o&&c<=a||h>=o&&h<=a)&&(s=!0),d&&s}function b(e){e.map(function(e){e.refresh(),e.children&&e.children.length&&b(e.children),N(e)})}function N(e){var t=[],n=new s(j(e,e.x-e.circleRadius),T(e,e.y-e.circleRadius)),r=new s(I(e,e.x+e.circleRadius),A(e,e.y+e.circleRadius));t.push(n,r),e.rect=t}function C(e){return e.sort(function(e,t){return e.numChild>t.numChild}).map(function(e,t){e.children&&(e.children=C(e.children)),e.order=t+1}),e}function S(e,t){var n=e.map(function(e){var n=new d(e,t);return n.children&&(n.children=S(n.children,n)),n});return n}function R(e,t){for(var n=e.length,r=0;r<n;r++)e[r].angle=t+2*Math.PI/n*r;e[0].order=n,e[0].x=e[0].order*Math.cos(e[0].angle),e[0].y=0-e[0].order*Math.sin(e[0].angle);for(var l=0;l<n;l++){for(var i=0,c=0,o=0;o<n;o++)e[o].order&&(i+=e[o].x,c+=e[o].y);for(var h=1e5,a=-1,d=n-l-1,s=0;s<n;s++)if(!e[s].order){var u=Math.abs(i+d*Math.cos(e[s].angle)),v=Math.abs(c-d*Math.sin(e[s].angle));u+v<h&&(a=s,h=u+v)}a>=0&&(e[a].order=d,e[a].x=e[a].order*Math.cos(e[a].angle),e[a].y=0-e[a].order*Math.sin(e[a].angle))}}function M(e,t,n){var r=!0,l=!1,i=void 0;try{for(var c,o=n[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){var h=c.value;h.angle=e+(t-e)/(2*Math.PI)*h.angle}}catch(e){l=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(l)throw i}}}function O(e,t,n){var r=e.rect[0].x,l=e.rect[0].y,i=e.rect[1].x,c=e.rect[1].y,o=new s(r,l),h=new s(r,c),a=new s(i,c),d=new s(i,l),u=new s(t.x,t.y),v=new s(n.x,n.y);return!!(P(o,h,u,v)||P(h,a,u,v)||P(a,d,u,v)||P(d,o,u,v))}function P(e,t,n,r){var l=k(e,t,n),i=k(e,t,r),c=k(n,r,e),o=k(n,r,t);if(l*i>0||c*o>0)return!1;if(0==l&&0==i){var h=!1;(n.x>=e.x&&n.x<=t.x||n.x>=e.x&&r.x>=e.x)&&(h=!0);var a=!1;return(n.y>=e.y&&n.y<=t.y||n.y>=e.y&&r.y>=e.y)&&(a=!0),h&&a}return!0}function k(e,t,n){var r=(n.x-e.x)*(t.y-e.y),l=(n.y-e.y)*(t.x-e.x);return r-l}function j(e,t){if(e.x-e.circleRadius<t&&(t=e.x-e.circleRadius),e.children&&e.children.length>0){var n=!0,r=!1,l=void 0;try{for(var i,c=e.children[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,h=j(o,t);h<t&&(t=h)}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}}return t}function T(e,t){if(e.y-e.circleRadius<t&&(t=e.y-e.circleRadius),e.children&&e.children.length>0){var n=!0,r=!1,l=void 0;try{for(var i,c=e.children[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,h=T(o,t);h<t&&(t=h)}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}}return t}function I(e,t){if(e.x+e.circleRadius>t&&(t=e.x+e.circleRadius),e.children&&e.children.length>0){var n=!0,r=!1,l=void 0;try{for(var i,c=e.children[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,h=I(o,t);h>t&&(t=h)}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}}return t}function A(e,t){if(e.y+e.circleRadius>t&&(t=e.y+e.circleRadius),e.children&&e.children.length>0){var n=!0,r=!1,l=void 0;try{for(var i,c=e.children[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value,h=A(o,t);h>t&&(t=h)}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}}return t}u.__proto__.arrange=R,u.__proto__.shrinkAngle=M,u.__proto__.transfer2Node=S,u.__proto__.sortChildren=C,u.__proto__.setNodeAttr=m,u.__proto__.changeNodeAttr=w,u.__proto__.findNodeByCoord=p,u.__proto__.calcNodeRect=N,u.__proto__.getOrigin=v,u.__proto__.getDistance=f,u.__proto__.testCons=_;var X=function(){function e(t){Object(h["a"])(this,e),this.styles={radius:40,activeColor:"#2826f7",notActiveColor:"#6d9eeb"},this.id=0,this.root=new d(t,null),this.root.id=this.id++,this.distance={},this.move={},this.moveTo={},this.origin={},this.scale=1,this.allScale=1}return Object(a["a"])(e,[{key:"addNodeId",value:function(e){var t=this;e.map(function(e){e.id=t.id++,e.children&&t.addNodeId(e.children)})}},{key:"angle",value:function(e,t){var n=e.children;if(e.children&&0!=e.children.length){for(var r=[],l=0;l<n.length;l++)r.push(new d(n[l],e));t?u.arrange(r,Math.PI/2):(u.arrange(r,Math.PI/r.length),u.shrinkAngle(e.angle-Math.PI/2,e.angle+Math.PI/2,r));for(var i=[],c=0;c<n.length;c++)for(var o=0;o<r.length;o++)n[c].order==r[o].order&&(i[o]=n[c],n[c].angle=r[o].angle);e.children=i;var h=!0,a=!1,s=void 0;try{for(var v,f=n[Symbol.iterator]();!(h=(v=f.next()).done);h=!0){var x=v.value;this.angle(x)}}catch(e){a=!0,s=e}finally{try{h||null==f.return||f.return()}finally{if(a)throw s}}}}},{key:"getNodeById",value:function(e,t){var n,r=t||this.root.children,l=!0,i=!1,c=void 0;try{for(var o,h=r[Symbol.iterator]();!(l=(o=h.next()).done);l=!0){var a=o.value;a.id==e&&(n=a),a.children&&a.children.length&&this.getNodeById(e,a.children)&&(n=this.getNodeById(e,a.children))}}catch(e){i=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(i)throw c}}return n}},{key:"changeNodeColor",value:function(e){var t=this.styles.notActiveColor;this.root.styles.color=t,this.changeAllNodeColor(t,this.root);var n=this.styles.activeColor;e.styles.color=n,e.parent&&(e.parent.styles.color=n),e.children&&e.children.length&&e.children.map(function(e){e.styles.color=n})}},{key:"changeAllNodeColor",value:function(e,t){var n=this;t.styles.color=e,t.children&&t.children.length&&t.children.map(function(t){n.changeAllNodeColor(e,t)})}},{key:"start",value:function(){this.ctx.beginPath(),this.ctx.arc(this.root.x,this.root.y,this.root.circleRadius,0,2*Math.PI),this.ctx.fillStyle=this.root.styles.color,this.ctx.fill(),this.root.children.sort(function(e,t){return e.numChild<=t.numChild});var e=!0,t=!1,n=void 0;try{for(var r,l=this.root.children.entries()[Symbol.iterator]();!(e=(r=l.next()).done);e=!0){var i=Object(o["a"])(r.value,2),c=(i[0],i[1]);this.drawNode(c,this.root)}}catch(e){t=!0,n=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw n}}}},{key:"draw",value:function(e){var t=this;this.ch=window.getComputedStyle(e,!1).height.replace("px",""),this.cw=window.getComputedStyle(e,!1).width.replace("px",""),this.root.children=u.transfer2Node(this.root.children,this.root);var n=u.sortChildren(this.root.children);this.addNodeId(n),this.angle(this.root,!0),this.root.x=this.cw/2,this.root.y=this.ch/2;var r=!0,l=!1,i=void 0;try{for(var c,h=n.entries()[Symbol.iterator]();!(r=(c=h.next()).done);r=!0){var a=Object(o["a"])(c.value,2),d=a[0],s=a[1];u.setNodeAttr(s,this.root,d,40)}}catch(e){l=!0,i=e}finally{try{r||null==h.return||h.return()}finally{if(l)throw i}}var v=!0,f=!1,x=void 0;try{for(var y,p=n.entries()[Symbol.iterator]();!(v=(y=p.next()).done);v=!0){var g=Object(o["a"])(y.value,2);d=g[0],s=g[1];u.changeNodeAttr(s,this.root)}}catch(e){f=!0,x=e}finally{try{v||null==p.return||p.return()}finally{if(f)throw x}}u.calcNodeRect(this.root),this.canvas=e,this.ctx=e.getContext("2d"),this.start(),this.canvas.onclick=function(e){var n={x:e.clientX,y:e.clientY},r=u.findNodeByCoord(n,t.root);r&&(t.activeNode==r?(t.activeNode=null,t.changeAllNodeColor(t.styles.activeColor,t.root)):(t.activeNode=r,t.changeNodeColor(r)),t.show(r.id,e.clientY-4*r.circleRadius,e.clientX),t.clearCtx(),t.start())},this.canvas.ontouchstart=function(e){1===e.touches.length?t.move={x:e.touches[0].clientX,y:e.touches[0].clientY}:e.touches.length>1&&(t.distance.start=u.getDistance({x:e.touches[0].clientX,y:e.touches[0].clientY},{x:e.touches[1].clientX,y:e.touches[1].clientY}))},this.canvas.ontouchmove=function(e){1===e.touches.length?(t.moveTo={x:e.touches[0].clientX,y:e.touches[0].clientY},t.setTransform()):2===e.touches.length&&(t.distance.stop=u.getDistance({x:e.touches[0].clientX,y:e.touches[0].clientY},{x:e.touches[1].clientX,y:e.touches[1].clientY}),t.origin=u.getOrigin({x:e.touches[0].clientX/t.allScale,y:e.touches[0].clientY/t.allScale},{x:e.touches[1].clientX/t.allScale,y:e.touches[1].clientY/t.allScale}),t.scale=t.distance.stop/t.distance.start,t.distance.start=t.distance.stop,t.setScaleNode(t.origin.x,t.origin.y)),e.preventDefault()},this.canvas.ontouchend=function(e){2===e.touches.length&&(t.scale=1,t.setScaleNode(e.touches[0].clientX,e.touches[0].clientY))},this.canvas.ontouchcancel=function(e){2===e.touches.length&&(t.scale=1,t.setScaleNode(e.touches[0].clientX,e.touches[0].clientY))}}},{key:"setScaleNode",value:function(e,t){this.clearCtx(),this.root.circleRadius*=this.scale,this.allScale*=this.scale,this.root.x=e-(e-this.root.x)*this.scale,this.root.y=t-(t-this.root.y)*this.scale,this.scaleChildren(this.root.children,this.scale),u.calcNodeRect(this.root),this.start()}},{key:"scaleChildren",value:function(e,t){var n=this;e.map(function(e){e.radius*=t,e.circleRadius*=t,u.calcNodeRect(e),e.refresh(),e.children&&e.children.length&&n.scaleChildren(e.children,t)})}},{key:"setTransform",value:function(){this.clearCtx();var e=this.moveTo.x-this.move.x,t=this.moveTo.y-this.move.y;this.root.x+=e,this.root.y+=t,this.transfomNode(this.root.children,e,t),u.calcNodeRect(this.root),this.start(),this.move=this.moveTo}},{key:"transfomNode",value:function(e,t,n){var r=this;e.map(function(e){e.x+=t,e.y+=n,u.calcNodeRect(e),e.refresh(),e.children&&e.children.length&&r.transfomNode(e.children,t,n)})}},{key:"clearCtx",value:function(){var e=this.root.rect[0].x-20,t=this.root.rect[0].y-20,n=this.root.rect[1].x+20,r=this.root.rect[1].y+20;this.ctx.clearRect(e,t,Math.abs(n-e),Math.abs(r-t))}},{key:"drawNode",value:function(e,t){if(this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.circleRadius,0,2*Math.PI),this.ctx.fillStyle=e.styles.color,this.ctx.fill(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x,t.y),this.ctx.save(),this.ctx.fillStyle="#ffffff",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.font="12px sans-serif",this.ctx.fillText(e.id,e.x,e.y),this.ctx.globalCompositeOperation="destination-over",this.ctx.stroke(),this.ctx.restore(),e.children){e.children.sort(function(e,t){return e.numChild>t.numChild});var n=!0,r=!1,l=void 0;try{for(var i,c=e.children.entries()[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var h=Object(o["a"])(i.value,2),a=(h[0],h[1]);this.drawNode(a,e)}}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}}}}]),e}(),Y={name:"app",data:function(){return{showText:"",show:!1,t:null}},mounted:function(){var e=new X(c);window.charts=e,window.Utils=u;var t=document.getElementById("canvas"),n=document.getElementById("app"),r=window.getComputedStyle(n,!1).width.replace("px",""),l=window.getComputedStyle(n,!1).height.replace("px","");t.getContext("2d");t.width=r,t.height=l,e.draw(t),e.__proto__.show=this.showPop,document.addEventListener("touchmove",function(e){e.cancelable&&e.defaultPrevented&&e.preventDefault()})},methods:{showPop:function(e,t,n){var r=this;this.show=!0,this.showText=e,this.$refs.showPop.style.cssText="top: ".concat(t,"px;left: ").concat(n,"px"),this.t&&clearTimeout(this.t),this.t=setTimeout(function(){r.show=!1},1500)}}},B=Y,D=(n("5c0b"),n("2877")),E=Object(D["a"])(B,l,i,!1,null,null,null);E.options.__file="App.vue";var $=E.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e($)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("2856"),l=n.n(r);l.a}});
//# sourceMappingURL=app.bf48e657.js.map